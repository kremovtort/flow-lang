cabal-version: 3.14
name: flow-parser
version: 0.1.0.0
-- synopsis:
-- description:
license: MPL-2.0
license-file: LICENSE
author: Alexander Makarov
maintainer: i@kremovtort.ru
-- copyright:
category: Development
build-type: Simple

common warnings
  ghc-options: -Wall

common extensions
  default-extensions:
    BlockArguments
    DeriveAnyClass
    DerivingStrategies
    DuplicateRecordFields
    MultilineStrings
    NoFieldSelectors
    OverloadedRecordDot
    OverloadedStrings
    PackageImports
    QuantifiedConstraints
    StrictData

library
  import: warnings, extensions
  exposed-modules:
    Flow.AST
    Flow.AST.Ann
    Flow.AST.Surface
    Flow.AST.Surface.Callable
    Flow.AST.Surface.Common
    Flow.AST.Surface.Constraint
    Flow.AST.Surface.Decl
    Flow.AST.Surface.Expr
    Flow.AST.Surface.Literal
    Flow.AST.Surface.Module
    Flow.AST.Surface.Pattern
    Flow.AST.Surface.Syntax
    Flow.AST.Surface.Type
    Flow.AST.Surface.Use
    Flow.Lexer
    Flow.Parser
    Flow.Parser.Callable
    Flow.Parser.Common
    Flow.Parser.Constraint
    Flow.Parser.Decl
    Flow.Parser.Expr
    Flow.Parser.Literal
    Flow.Parser.Module
    Flow.Parser.Operators
    Flow.Parser.Pattern
    Flow.Parser.Syntax
    Flow.Parser.Type
    Flow.Parser.Use

  build-depends:
    base ^>=4.21.0.0,
    bytestring,
    containers,
    megaparsec,
    nonempty-vector,
    parser-combinators,
    recursion-schemes,
    scientific,
    template-haskell,
    text,
    tree-diff,
    vector,

  hs-source-dirs: lib
  default-language: GHC2024

test-suite flow-parser-test
  import: warnings, extensions
  default-language: GHC2024
  other-modules:
    Flow.LexerSpec
    Flow.Parser.ExpressionSpec
    Flow.Parser.SpecHelpers
    Flow.Parser.LHSExpressionSpec
    Flow.Parser.ModuleSpec
    Flow.Parser.PatternSpec
    Flow.Parser.TypeSpec

  -- other-extensions:
  type: exitcode-stdio-1.0
  hs-source-dirs: test
  main-is: Main.hs
  build-depends:
    base ^>=4.21.0.0,
    bytestring,
    flow-parser,
    hspec,
    hspec-megaparsec,
    megaparsec,
    nonempty-vector,
    prettyprinter,
    prettyprinter-ansi-terminal,
    scientific,
    text,
    tree-diff,
    vector,
